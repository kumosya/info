# 内存管理

## 内存映射

### 虚拟地址空间布局

| 虚拟地址范围 | 描述 | 访问权限 | 用途 |
| ------------ | ---- | -------- | ---- |
| 0xFFFFF00000000000 - 0xFFFFF80000000000 | 页表区 | 内核态可读写 | 四级页表存储 |
| 0xFFFF900100000000 - 0xFFFF900200000000 | 内核堆 | 内核态可读写 | 内核动态内存分配 |
| 0xFFFF900000000000 - 0xFFFF900100000000 | 内核栈 | 内核态可读写 | 内核线程栈空间 |
| 0xFFFF800030000000 - 0xFFFF800040000000 | 内核.bss段 | 内核态可读写 |  |
| 0xFFFF800020000000 - 0xFFFF800030000000 | 内核.data段 | 内核态可读写 |  |
| 0xFFFF800010000000 - 0xFFFF800020000000 | 内核.rodata段 | 内核态可读写 |  |
| 0xFFFF800000000000 - 0xFFFF800010000000 | 内核.text段 | 内核态可执行 | 内核代码、只读数据 |
| 0xFFFA800000000000 - 0xFFFF800000000000 | 硬件映射区 | 内核态可访问 | 硬件设备内存映射 |
| 0x0000800000000000 - 0x00007FFFFFFFFFFF | 保留区域 | 不可访问 | 不可访问 |
| 0x00007FFFFFFFF000 - 0x00007FFFFFFFFFFF | 用户栈 | 用户态可读写 | 用户进程栈空间 |
| 0x0000555555554000 - 0x00007FFFFFFFF000 | 用户堆 | 用户态可读写 | 用户进程堆空间 |
| 0x0000555555550000 - 0x0000555555554000 | 用户数据段 | 用户态可读写 | 用户全局变量、静态数据 |
| 0x0000555555550000 - 0x0000555555550000 | 用户代码段 | 用户态可执行 | 用户程序代码 |
| 0x0000000000000000 - 0x0000555555550000 | 共享库/映射区 | 用户态可访问 | 共享库、内存映射文件 |
